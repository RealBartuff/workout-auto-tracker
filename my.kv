#:kivy 2.0.0

WindowManager:
    Menu:
    WorkingScreen:
    Calendar:

<Menu>:
    name: "Menu"
    canvas.before:
        Color:
            rgba: (0, 0, 0, 1)
        Rectangle:
            pos: self.pos
            size: self.size

    GridLayout:
        cols: 1
        size: root.width - 400, root.height - 400
        pos: 200, 200

    Button:
        size_hint: 0.25, 0.25
        pos_hint: {"x": 0.4, "y": 0.65}
        text: "START WORKOUT"
        on_release:
            app.root.current = "Workout"
            root.manager.transition.direction = "left"

    Button:
        size_hint: 0.25, 0.25
        pos_hint: {"x": 0.4, "y": 0.4}
        text: "YOUR PROGRESS"
        on_release:
            app.root.current = "Calendar"
            root.manager.transition.direction = "left"

    Button:
        size_hint: 0.25, 0.25
        pos_hint: {"x": 0.4, "y": 0.15}
        text: "EXIT"
        on_release:
            root.end()

<WorkingScreen>:
    name: "Workout"
    canvas.before:
        Color:
            rgba: (0, 0, 0, 1)
        Rectangle:
            pos: self.pos
            size: self.size

    GridLayout:
        cols: 1
        size: root.width, root.height

        KivyCamera:
            id: qrcam
            allow_stretch: True

        GridLayout:
            cols: 3
            size_hint: 1, 0.2

            Button:
                size_hint: 0.25, 0.25
                pos_hint: {"x": 0.25, "top":1}
                text: "START"
                on_release:
                    root.dostart()

            Button:
                size_hint: 0.25, 0.25
                pos_hint: {"x": 0.5, "top":1}
                text: "PAUSE"
                on_release:
                    app.root.current = "Menu"
                    root.manager.transition.direction = "right"
                    root.doexit()

            Button:
                size_hint: 0.25, 0.25
                pos_hint: {"x": 0.75, "top":1}
                text: "GO BACK"
                on_release:
                    app.root.current = "Menu"
                    root.manager.transition.direction = "right"

<Calendar>:
    name: "Calendar"
    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height

        ProgressBar:
            id: circle_bar
            min: 0
            max: 1
            pos_hint: {"x": .1}
            size_hint_x: .8

    GridLayout:
        cols: 1
        size_hint: 1, 0.2

        Button:
            size_hint: 0.25, 0.25
            pos_hint: {"x": 0.4, "y": 0.01}
            text: "Go Back"
            on_release:
                app.root.current = "Menu"
                root.manager.transition.direction = "right"